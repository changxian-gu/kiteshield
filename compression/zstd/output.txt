cc -fno-stack-protector -nodefaultlibs -nostartfiles -I./ zstddeclib.c simple.c malloc.c string.c syscalls.c -e main -o test_zstd_decompress
simple.c: In function ‘main’:
simple.c:69:23: warning: implicit declaration of function ‘memcmp’ [-Wimplicit-function-declaration]
   69 |         int compare = memcmp(rawDxt1, dstDxt1, sizeof dstDxt1);
      |                       ^~~~~~
simple.c:40:1: note: include ‘<string.h>’ or provide a declaration of ‘memcmp’
   39 | #include "testcard-zstd.inl"
  +++ |+#include <string.h>
   40 | };
simple.c:70:22: error: ‘Decompressed’ undeclared (first use in this function); did you mean ‘set_compressed’?
   70 |         ks_printf(1, Decompressed size: %s\n", (size == sizeof dstDxt1) ? "PASSED" : "FAILED");
      |                      ^~~~~~~~~~~~
      |                      set_compressed
simple.c:70:22: note: each undeclared identifier is reported only once for each function it appears in
simple.c:70:34: error: expected ‘)’ before ‘size’
   70 |         ks_printf(1, Decompressed size: %s\n", (size == sizeof dstDxt1) ? "PASSED" : "FAILED");
      |                  ~               ^~~~~
      |                                  )
simple.c:70:43: error: stray ‘\’ in program
   70 |         ks_printf(1, Decompressed size: %s\n", (size == sizeof dstDxt1) ? "PASSED" : "FAILED");
      |                                           ^
simple.c:70:93: warning: missing terminating " character
   70 |         ks_printf(1, Decompressed size: %s\n", (size == sizeof dstDxt1) ? "PASSED" : "FAILED");
      |                                                                                             ^
simple.c:70:93: error: missing terminating " character
   70 |         ks_printf(1, Decompressed size: %s\n", (size == sizeof dstDxt1) ? "PASSED" : "FAILED");
      |                                                                                             ^~~
simple.c:71:41: error: stray ‘\’ in program
   71 |         ks_printf(1, Byte comparison: %s\n", (compare == 0) ? "PASSED" : "FAILED");
      |                                         ^
simple.c:71:81: warning: missing terminating " character
   71 |         ks_printf(1, Byte comparison: %s\n", (compare == 0) ? "PASSED" : "FAILED");
      |                                                                                 ^
simple.c:71:81: error: missing terminating " character
   71 |         ks_printf(1, Byte comparison: %s\n", (compare == 0) ? "PASSED" : "FAILED");
      |                                                                                 ^~~
simple.c:76:1: error: expected declaration or statement at end of input
   76 | }
      | ^
In file included from malloc.c:4:
string.h: In function ‘memcmp’:
string.h:19:6: error: redefinition of parameter ‘ks_printf’
   19 | void ks_printf(
      |      ^~~~~~~~~
In file included from malloc.c:2:
debug.h:105:6: note: previous definition of ‘ks_printf’ with type ‘void (*)(int,  const char *, ...)’
  105 | void ks_printf(int fd, const char *format, ...);
      |      ^~~~~~~~~
malloc.c:8:1: error: parameter ‘heap_base’ is initialized
    8 | void *heap_base = NULL;
      | ^~~~
malloc.c:10:1: warning: empty declaration
   10 | struct block {
      | ^~~~~~
malloc.c:17:23: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   17 | void ks_malloc_init() {
      |                       ^
malloc.c:31:25: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   31 | void ks_malloc_deinit() {
      |                         ^
malloc.c:36:69: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   36 | static struct block *split_block(size_t size, struct block *victim) {
      |                                                                     ^
malloc.c:63:30: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   63 | int ks_malloc_get_n_blocks() {
      |                              ^
malloc.c:74:30: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   74 | void *ks_malloc(size_t size) {
      |                              ^
malloc.c:104:42: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  104 | void* ks_calloc(size_t num, size_t size) {
      |                                          ^
malloc.c:112:25: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  112 | void ks_free(void *ptr) {
      |                         ^
In file included from debug.h:5,
                 from malloc.c:2:
syscalls.h:384:5: error: old-style parameter declarations in prototyped function definition
  384 | int memcmp(const void *s1, const void *s2, size_t n)
      |     ^~~~~~
malloc.c:136: error: expected ‘{’ at end of input
string.c: In function ‘memcmp’:
string.c:26:75: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   26 | void ks_vsnprintf(char *str, size_t size, const char *format, va_list vl) {
      |                                                                           ^
string.c:106:67: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  106 | void ks_snprintf(char *str, size_t size, const char *format, ...) {
      |                                                                   ^
string.c:114:49: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  114 | void ks_printf(int fd, const char *format, ...) {
      |                                                 ^
string.c:124:55: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  124 | int strncmp(const char *s1, const char *s2, size_t n) {
      |                                                       ^
string.c:134:54: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  134 | char *strncat(char *dest, const char *src, size_t n) {
      |                                                      ^
string.c:147:54: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  147 | char *strncpy(char *dest, const char *src, size_t n) {
      |                                                      ^
string.c:165:20: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  165 |         int radix) {
      |                    ^
string.c:192:46: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  192 | size_t strnlen(const char *s, size_t maxlen) {
      |                                              ^
string.c:201:53: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  201 | void *memcpy(void *dest, const void *src, size_t n) {
      |                                                     ^
string.c:207:40: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  207 | void *memset(void *s, int c, size_t n) {
      |                                        ^
string.c:213:54: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  213 | void *memmove(void *dest, const void *src, size_t n) {
      |                                                      ^
string.c:232:54: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  232 | int memcmp(const void *s1, const void *s2, size_t n) {
      |                                                      ^
In file included from debug.h:5,
                 from string.c:6:
syscalls.h:384:5: error: old-style parameter declarations in prototyped function definition
  384 | int memcmp(const void *s1, const void *s2, size_t n)
      |     ^~~~~~
string.c:245: error: expected ‘{’ at end of input
syscalls.c: In function ‘memcmp’:
syscalls.c:4:56: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
    4 | ssize_t sys_write(int fd, const char *s, size_t count) {
      |                                                        ^
syscalls.c:21:51: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   21 | ssize_t sys_read(int fd, void *buf, size_t count) {
      |                                                   ^
syscalls.c:38:51: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   38 | off_t sys_lseek(int fd, off_t offset, int whence) {
      |                                                   ^
syscalls.c:55:57: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   55 | int sys_open(const char *pathname, int flags, int mode) {
      |                                                         ^
syscalls.c:72:23: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   72 | int sys_close(int fd) {
      |                       ^
syscalls.c:87:27: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
   87 | void sys_exit(int status) {
      |                           ^
syscalls.c:106:23: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  106 |         off_t offset) {
      |                       ^
syscalls.c:129:24: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  129 |         size_t length) {
      |                        ^
syscalls.c:145:52: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  145 | int sys_mprotect(void *addr, size_t len, int prot) {
      |                                                    ^
syscalls.c:166:21: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  166 |         void *data) {
      |                     ^
syscalls.c:190:55: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  190 | pid_t sys_wait4(pid_t pid, int *wstatus, int options) {
      |                                                       ^
syscalls.c:211:18: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  211 | pid_t sys_fork() {
      |                  ^
syscalls.c:225:34: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  225 | int sys_kill(pid_t pid, int sig) {
      |                                  ^
syscalls.c:241:48: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  241 | int sys_tgkill(pid_t tgid, pid_t tid, int sig) {
      |                                                ^
syscalls.c:258:20: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  258 | pid_t sys_getpid() {
      |                    ^
syscalls.c:275:46: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  275 |         const struct kernel_sigaction *oact) {
      |                                              ^
syscalls.c:299:29: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  299 |         unsigned long arg5) {
      |                             ^
syscalls.c:318:58: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  318 | int sys_stat(const char *pathname, struct stat *statbuf) {
      |                                                          ^
syscalls.c:334:54: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  334 | int sys_setrlimit(int resource, struct rlimit *rlim) {
      |                                                      ^
syscalls.c:350:28: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
  350 | int assert(int expression) {
      |                            ^
syscalls.c:449: error: expected ‘{’ at end of input
make: *** [Makefile:9: test_zstd_decompress] Error 1
